
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>股票波动率和波幅分析</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .header h1 {
            color: #333;
            margin: 0;
            font-size: 2.5em;
        }
        
        .control-panel {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .control-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-group label {
            font-weight: bold;
            color: #333;
        }
        
        .control-group select, .control-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #0056b3;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            margin: 2px;
            padding: 5px 10px;
            font-size: 12px;
        }
        
        .btn-secondary:hover {
            background-color: #545b62;
        }
        
        .btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        /* 自定义下拉多选样式 */
        .custom-select {
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 300px;
        }
        
        .select-selected {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            user-select: none;
            position: relative;
            min-height: 20px;
        }
        
        .select-selected:after {
            position: absolute;
            content: "";
            top: 14px;
            right: 10px;
            width: 0;
            height: 0;
            border: 6px solid transparent;
            border-color: #666 transparent transparent transparent;
        }
        
        .select-selected.select-arrow-active:after {
            border-color: transparent transparent #666 transparent;
            top: 7px;
        }
        
        .select-items {
            position: absolute;
            background-color: #fff;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 99;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 4px 4px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
        
        .select-items.show {
            display: block;
        }
        
        .select-items div {
            color: #333;
            padding: 8px 12px;
            text-decoration: none;
            display: block;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .select-items div:hover {
            background-color: #f8f9fa;
        }
        
        .select-items div.selected {
            background-color: #007bff;
            color: white;
        }
        
        .select-items div.selected:hover {
            background-color: #0056b3;
        }
        
        .selected-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }
        
        .selected-item {
            background-color: #007bff;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .selected-item .remove {
            cursor: pointer;
            font-weight: bold;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .stat-card h3 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 16px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
        
        .chart-container {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }
        
        .chart-content {
            text-align: center;
        }
        
        .chart-content img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        
        .risk-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .risk-low {
            background-color: #d4edda;
            color: #155724;
        }
        
        .risk-medium {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .risk-high {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .info-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        
        .info-section h2 {
            color: #495057;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .formula-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .formula-card h3 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .formula {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #495057;
            margin: 10px 0;
            border-left: 3px solid #007bff;
        }
        
        .formula-card p {
            color: #6c757d;
            font-size: 12px;
            line-height: 1.4;
            margin: 0;
        }
        
        .legend {
            background-color: #e7f3ff;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
            color: #495057;
        }
        
        .info {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 股票波动率和波幅分析</h1>
            <p>基于周K线数据的波动率和波幅分析工具</p>
        </div>
        
        <div class="info-section">
            <h2>📈 波动率计算方式说明</h2>
            <div class="formula-grid">
                <div class="formula-card">
                    <h3>1. 历史波动率 (Historical Volatility)</h3>
                    <div class="formula">σ = std(ln(Pt/Pt-1)) × √52</div>
                    <p>基于收盘价对数收益率的标准差，年化处理。反映价格变化的离散程度。</p>
                </div>
                <div class="formula-card">
                    <h3>2. 已实现波动率 (Realized Volatility)</h3>
                    <div class="formula">σ = √(Σ(rt²)/n) × √52</div>
                    <p>基于收益率平方和的平方根，更直接地反映实际波动情况。</p>
                </div>
                <div class="formula-card">
                    <h3>3. Parkinson波动率</h3>
                    <div class="formula">σ = √(Σ(ln(Ht/Lt)²)/(4×ln(2)×n)) × √52</div>
                    <p>利用日内最高价和最低价信息，比收盘价波动率更精确。</p>
                </div>
                <div class="formula-card">
                    <h3>4. Garman-Klass波动率</h3>
                    <div class="formula">σ = √(Σ(0.5×ln(Ht/Lt)²-(2×ln(2)-1)×ln(Ct/Ot)²)/n) × √52</div>
                    <p>综合开盘、收盘、最高、最低价信息，提供最全面的波动率估计。</p>
                </div>
            </div>
            <div class="legend">
                <p><strong>符号说明:</strong> Pt=价格, rt=收益率, Ht=最高价, Lt=最低价, Ct=收盘价, Ot=开盘价, n=样本数</p>
            </div>
        </div>
        
        <div class="info">
            <p><strong>生成时间:</strong> 2025-07-19 18:00:17</p>
            <p><strong>分析范围:</strong> 2023-07-20 至 2025-07-19</p>
            <p><strong>分析股票:</strong> 2 只</p>
        </div>
        
        <div class="control-panel">
            <h2>分析控制面板</h2>
            
        <div class="control-row">
            <div class="control-group">
                <label for="stockSelector">选择股票:</label>
                <div class="custom-select">
                    <div class="select-selected" onclick="toggleSelect()">
                        点击选择股票
                    </div>
                    <div class="select-items" id="stockOptions">
                        <div class="select-item" data-value="000001.SZ" selected>000001.SZ</div><div class="select-item" data-value="000002.SZ" selected>000002.SZ</div>
                    </div>
                </div>
                <div class="selected-items" id="selectedItems"></div>
                <div style="margin-top: 5px; font-size: 12px; color: #666;">
                    已选择 <span id="selectedCount">10</span> 只股票
                </div>
            </div>
            <div class="control-group">
                <button type="button" class="btn btn-secondary" onclick="selectAll()">全选</button>
                <button type="button" class="btn btn-secondary" onclick="clearSelection()">清空</button>
                <button type="button" class="btn btn-secondary" onclick="selectTop10()">选择前10</button>
            </div>
        </div>
        
            
        <div class="control-row">
            <div class="control-group">
                <label for="startDate">开始日期:</label>
                <input type="date" id="startDate" value="2023-07-20">
            </div>
            <div class="control-group">
                <label for="endDate">结束日期:</label>
                <input type="date" id="endDate" value="2025-07-19">
            </div>
        </div>
        
            <div class="control-row">
                <button class="btn" onclick="refreshAnalysis()">重新分析</button>
                <button class="btn" onclick="exportData()">导出数据</button>
            </div>
        </div>
        
        <div class="summary-stats">
            
        <div class="stat-card">
            <h3>平均波动率</h3>
            <div class="stat-value">0.1635</div>
        </div>
        <div class="stat-card">
            <h3>平均波幅</h3>
            <div class="stat-value">6.01%</div>
        </div>
        <div class="stat-card">
            <h3>高风险股票</h3>
            <div class="stat-value">0</div>
        </div>
        <div class="stat-card">
            <h3>低风险股票</h3>
            <div class="stat-value">0</div>
        </div>
        
        </div>
        
        <div class="charts-grid">
            
                <div class="chart-container">
                    <div class="chart-title">
                        000001.SZ
                        <span class="risk-indicator risk-high">中高风险</span>
                    </div>
                    <div class="chart-content">
                        <img src="images/volatility_000001.SZ.png" alt="000001.SZ 波动率分析" style="width: 100%; height: auto;">
                    </div>
                    <div style="margin-top: 10px; font-size: 12px; color: #666;">
                        波动率: 0.1615 | 波幅: 5.65%
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">
                        000002.SZ
                        <span class="risk-indicator risk-medium">中等风险</span>
                    </div>
                    <div class="chart-content">
                        <img src="images/volatility_000002.SZ.png" alt="000002.SZ 波动率分析" style="width: 100%; height: auto;">
                    </div>
                    <div style="margin-top: 10px; font-size: 12px; color: #666;">
                        波动率: 0.1655 | 波幅: 6.36%
                    </div>
                </div>
                
        </div>
    </div>
    
    <script>
        // 全局变量存储选中的股票
        let selectedStocks = [];
        
        // 存储所有股票的数据
        const allStockData = {"000001.SZ": {"data": {"dates": ["2023-07-23 00:00:00", "2023-07-30 00:00:00", "2023-08-06 00:00:00", "2023-08-13 00:00:00", "2023-08-20 00:00:00", "2023-08-27 00:00:00", "2023-09-03 00:00:00", "2023-09-10 00:00:00", "2023-09-17 00:00:00", "2023-09-24 00:00:00", "2023-10-01 00:00:00", "2023-10-15 00:00:00", "2023-10-22 00:00:00", "2023-10-29 00:00:00", "2023-11-05 00:00:00", "2023-11-12 00:00:00", "2023-11-19 00:00:00", "2023-11-26 00:00:00", "2023-12-03 00:00:00", "2023-12-10 00:00:00", "2023-12-17 00:00:00", "2023-12-24 00:00:00", "2023-12-31 00:00:00", "2024-01-07 00:00:00", "2024-01-14 00:00:00", "2024-01-21 00:00:00", "2024-01-28 00:00:00", "2024-02-04 00:00:00", "2024-02-11 00:00:00", "2024-02-25 00:00:00", "2024-03-03 00:00:00", "2024-03-10 00:00:00", "2024-03-17 00:00:00", "2024-03-24 00:00:00", "2024-03-31 00:00:00", "2024-04-07 00:00:00", "2024-04-14 00:00:00", "2024-04-21 00:00:00", "2024-04-28 00:00:00", "2024-05-05 00:00:00", "2024-05-12 00:00:00", "2024-05-19 00:00:00", "2024-05-26 00:00:00", "2024-06-02 00:00:00", "2024-06-09 00:00:00", "2024-06-16 00:00:00", "2024-06-23 00:00:00", "2024-06-30 00:00:00", "2024-07-07 00:00:00", "2024-07-14 00:00:00", "2024-07-21 00:00:00", "2024-07-28 00:00:00", "2024-08-04 00:00:00", "2024-08-11 00:00:00", "2024-08-18 00:00:00", "2024-08-25 00:00:00", "2024-09-01 00:00:00", "2024-09-08 00:00:00", "2024-09-15 00:00:00", "2024-09-22 00:00:00", "2024-09-29 00:00:00", "2024-10-06 00:00:00", "2024-10-13 00:00:00", "2024-10-20 00:00:00", "2024-10-27 00:00:00", "2024-11-03 00:00:00", "2024-11-10 00:00:00", "2024-11-17 00:00:00", "2024-11-24 00:00:00", "2024-12-01 00:00:00", "2024-12-08 00:00:00", "2024-12-15 00:00:00", "2024-12-22 00:00:00", "2024-12-29 00:00:00", "2025-01-05 00:00:00", "2025-01-12 00:00:00", "2025-01-19 00:00:00", "2025-01-26 00:00:00", "2025-02-02 00:00:00", "2025-02-09 00:00:00", "2025-02-16 00:00:00", "2025-02-23 00:00:00", "2025-03-02 00:00:00", "2025-03-09 00:00:00", "2025-03-16 00:00:00", "2025-03-23 00:00:00", "2025-03-30 00:00:00", "2025-04-06 00:00:00", "2025-04-13 00:00:00", "2025-04-20 00:00:00", "2025-04-27 00:00:00", "2025-05-04 00:00:00", "2025-05-11 00:00:00", "2025-05-18 00:00:00", "2025-05-25 00:00:00", "2025-06-01 00:00:00", "2025-06-08 00:00:00", "2025-06-15 00:00:00", "2025-06-22 00:00:00", "2025-06-29 00:00:00", "2025-07-06 00:00:00", "2025-07-13 00:00:00"], "close_prices": [11.34, 12.26, 12.3, 11.89, 11.56, 11.23, 11.32, 11.27, 11.22, 11.24, 11.2, 11.0, 10.6, 10.45, 10.48, 10.3, 10.15, 10.1, 9.66, 9.3, 9.21, 9.2, 9.39, 9.27, 9.19, 9.17, 9.62, 9.27, 9.67, 10.85, 10.49, 10.38, 10.6, 10.36, 10.52, 10.46, 10.06, 10.69, 10.6, 10.79, 10.94, 11.42, 11.31, 11.11, 10.99, 10.18, 10.0, 10.15, 9.97, 10.31, 10.37, 10.03, 10.14, 10.04, 10.13, 10.47, 10.16, 10.08, 9.7, 9.9, 11.42, 12.21, 11.72, 12.04, 11.71, 11.43, 11.72, 11.44, 11.28, 11.38, 11.66, 11.56, 11.62, 11.83, 11.38, 11.3, 11.45, 11.34, 11.47, 11.38, 11.55, 11.64, 11.53, 11.67, 11.97, 11.42, 11.35, 11.34, 10.89, 11.18, 11.01, 10.91, 11.15, 11.38, 11.46, 11.56, 11.7, 11.58, 11.84, 12.2, 12.6, 12.91], "hist_vol_20": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.18716301415093867, 0.11410709184344227, 0.12427817082717577, 0.11935744687875942, 0.11644158943626852, 0.11340019502996913, 0.14478496895881884, 0.1518848657857904, 0.17348571762973136, 0.26310343455897406, 0.2681201772986515, 0.2672645959149763, 0.26332430470069346, 0.2649697943780083, 0.2661533339075304, 0.26471710820762284, 0.2714197442799195, 0.2885643785147965, 0.27802212022394507, 0.26901758216365707, 0.2675827452757583, 0.27258817060657653, 0.27399792881722784, 0.27521533436786233, 0.2756240777209485, 0.30802915736490605, 0.30126458143595586, 0.2944279840132685, 0.28927075511712735, 0.22415484192783777, 0.21808253071236625, 0.2239519552295916, 0.22173828674100585, 0.21939893401734298, 0.21828979531306558, 0.22525269305817142, 0.2214428311985722, 0.196599233401219, 0.2046756213983422, 0.20550299908685055, 0.3135369504227069, 0.3242593465184817, 0.33153851615214047, 0.33214715429251335, 0.3353297682539683, 0.3110023530331594, 0.30977102260069667, 0.3137512474691732, 0.31301733951202976, 0.30962347569181586, 0.3111986559049204, 0.30517072988216765, 0.30511486664962084, 0.30423827933150493, 0.31351193540705197, 0.3106436548203077, 0.30552310716885184, 0.30575342239358366, 0.2964008568696718, 0.2967682747661172, 0.188356075808773, 0.15199549211472094, 0.137964707145352, 0.131720162484091, 0.13064044030466315, 0.14691858739855831, 0.14081802521045492, 0.13550591176702723, 0.148819472172687, 0.15476052226294634, 0.15023042846584875, 0.15028614303085078, 0.1550272366930921, 0.15596120632906166, 0.14332176550364364, 0.1433436758781273, 0.14309108045216345, 0.14322958175984077, 0.146391721116702, 0.15228753775577963, 0.15831802484487775, 0.16150879570451046], "hist_vol_60": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.2632299623676071, 0.260520379331679, 0.2632604260239085, 0.26261112718789953, 0.2625774941947257, 0.2621483366680354, 0.263069846828918, 0.2640421036890545, 0.26434546630147854, 0.26446654997278796, 0.2653875058075997, 0.26494782051517995, 0.26253367137816364, 0.2625369319987581, 0.26527387842437855, 0.2648077597613888, 0.2645741914659003, 0.2647196814506653, 0.2611630900604419, 0.25850411051297906, 0.25841896897752364, 0.25840360259352435, 0.25821952896493494, 0.2578767150534402, 0.25836922958128067, 0.26271510034074497, 0.2594904770394703, 0.2567692332497229, 0.257277914226943, 0.23518335058252415, 0.2334383261099749, 0.23338132099166556, 0.23344229640494216, 0.23304190267595892, 0.23273740680376523, 0.23273400909629594, 0.2297057664718005, 0.22326598596398092, 0.22390487073556858, 0.2249536100441639, 0.22645491114769795, 0.2241642629332892], "realized_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.19724433163672278, 0.1519464061918286, 0.15539169690590257, 0.1469301700477582, 0.14044202255784283, 0.13249684923413063, 0.15282982269226972, 0.16394245593058285, 0.17738594545102618, 0.25675740392033647, 0.26239587134994347, 0.2613357670173915, 0.2566567843907471, 0.258279439135036, 0.25941781727257507, 0.2580741737337279, 0.2645667328798888, 0.28200168000366016, 0.2730430007073334, 0.2676243620610961, 0.2680904721004773, 0.27688177445245027, 0.27535546652658693, 0.2760763753491124, 0.276277894147792, 0.30258414152340984, 0.2939684359886554, 0.28882981400712143, 0.2821613699105979, 0.21925311219162186, 0.21260103325737695, 0.21863142614425646, 0.21671492543168525, 0.2141426380164573, 0.21319811241175993, 0.21954943782062233, 0.21586523567471058, 0.19278869835182963, 0.2020419577711235, 0.20269013428521943, 0.3059899549509715, 0.31696775396737026, 0.32339873684991344, 0.3250319260443805, 0.3276388871379717, 0.3059903420481367, 0.30730246377002296, 0.3088344359195331, 0.3083213756290462, 0.3038764364434589, 0.30625066493579184, 0.3018160662043156, 0.30141879985494574, 0.30237723070708233, 0.30844008127551004, 0.3040248375213633, 0.30088960650737306, 0.3010222038216051, 0.2951488735172751, 0.29358345210104964, 0.18363215127872598, 0.14914632029614835, 0.13460042991094243, 0.1288772430279323, 0.12757849258914247, 0.14319887342618062, 0.13773891548782619, 0.13211275599504926, 0.14560502552573132, 0.15097731152577235, 0.14787984323806902, 0.14795947534713572, 0.15183341363175276, 0.15265392583946436, 0.13971560994271884, 0.1399546749932197, 0.1396851898080462, 0.13980700120357525, 0.1431434475997481, 0.15053661236007085, 0.15746616940021183, 0.16178659736099618], "parkinson_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.17884736778656313, 0.1819689968756966, 0.16260941468996407, 0.16280032180850978, 0.16454491893802078, 0.16382553431416594, 0.16269018899513568, 0.16518324303773732, 0.18224568192923216, 0.19071869566877506, 0.2404629729610534, 0.24390702358714866, 0.24546493340697562, 0.24593783121646537, 0.24582988326047642, 0.24674569947916003, 0.2451310036777273, 0.24683271239584567, 0.2610882667385207, 0.25830230000891563, 0.2576759302848317, 0.257250436581079, 0.26088002348854855, 0.2590495447628988, 0.25997496148644994, 0.25941655917242046, 0.2732014189746507, 0.26421521355297595, 0.25354229212333923, 0.2523049807912609, 0.2092768894163068, 0.20543769557497116, 0.20612468690657382, 0.20252727410393698, 0.2031158907728058, 0.2033381073533293, 0.2050633480402408, 0.20481721806467115, 0.18571716168308114, 0.18832207158248424, 0.1866794132292007, 0.2387750599990841, 0.24041223510763265, 0.27754094783013245, 0.2775517441409971, 0.27777681218648875, 0.2643988050703744, 0.2705216964601795, 0.27031386502092736, 0.27244885858543455, 0.27023492464334753, 0.2716389720727138, 0.2707344160886235, 0.2692885855615848, 0.2692096472234594, 0.27226846300099566, 0.2721467168076391, 0.2725087241030014, 0.27421950508612286, 0.2708365496796075, 0.2704372569953027, 0.22366691518737256, 0.2180769922516517, 0.16531358054652381, 0.16067570946759432, 0.1634944944764096, 0.15970971962267472, 0.14724215413604613, 0.14394933744690247, 0.1391579849912937, 0.13877813908091274, 0.13556627656035902, 0.132368057823043, 0.1333794785069888, 0.13351122179485003, 0.12451192676702333, 0.12052159385744692, 0.1166722876731859, 0.11548658595122929, 0.11819285452833529, 0.13750626361443735, 0.14883379225942261, 0.15487089019124523], "gk_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.16771238700496632, 0.1724115107081018, 0.16347357535694426, 0.16216016622734625, 0.1662222760361425, 0.1660690690978377, 0.16705177050484057, 0.16927524940410846, 0.18694986909487382, 0.19177706078252696, 0.23507030879807037, 0.23840410494275308, 0.2409512351613722, 0.2435485630705241, 0.2430081917559105, 0.243866252152223, 0.24237573263042023, 0.2427151729065827, 0.25570974534652263, 0.2554843174713655, 0.25668394351724877, 0.2560873772804539, 0.2569264620968882, 0.25513482091521833, 0.2561368169049559, 0.25511577331276936, 0.263658009686788, 0.2550772434031048, 0.24301077470545238, 0.24626446131257893, 0.20743536815729488, 0.2038021210643165, 0.20228726661607305, 0.19794344582595058, 0.1995778967799059, 0.20025832788162848, 0.2000460701293921, 0.20007983869437695, 0.1823757416677895, 0.18265793850759118, 0.18066013333131067, 0.20636582915249305, 0.20830769646463942, 0.22701072839498498, 0.2276770228602657, 0.22752800889610816, 0.21677562565548336, 0.22598494391015364, 0.2257485826839428, 0.227540836920505, 0.22665511151163287, 0.22783719587602874, 0.22857286265049984, 0.22644776095389638, 0.22584251906368777, 0.22852143672001568, 0.23059655897920905, 0.23286149936895859, 0.23524395698343656, 0.23234276764188289, 0.23218784415896757, 0.20599700075165706, 0.20362551705410273, 0.17881540679525873, 0.17244127314969898, 0.17518910730966086, 0.1706813733205316, 0.15629923641999002, 0.15287121543788665, 0.14941715080531295, 0.14772740198439296, 0.14543830247117312, 0.1411849276528318, 0.14105447006136437, 0.14080360853978807, 0.13333261580497682, 0.12791692611474206, 0.12336310786489554, 0.12193294176968829, 0.1235807436170552, 0.14549451745817282, 0.15651439012167415, 0.16265635115920649], "intraday_amp": [1.9400352733685966, 8.646003262642745, 4.878048780487801, 3.195962994112691, 3.373702422145318, 4.719501335707919, 7.155477031802124, 3.194321206743562, 1.7825311942959097, 1.957295373665486, 1.6071428571428545, 2.272727272727273, 5.094339622641518, 2.9665071770334808, 2.3854961832061066, 3.883495145631071, 3.251231527093597, 2.772277227722766, 5.279503105590059, 4.086021505376333, 4.017372421281207, 3.152173913043469, 4.898828541001074, 3.9913700107874783, 2.9379760609358145, 4.252998909487466, 7.380457380457371, 8.737864077669908, 5.894519131334026, 14.65437788018433, 4.575786463298384, 3.6608863198458645, 5.188679245283026, 2.8957528957528855, 3.2319391634980974, 2.485659655831738, 4.473161033797227, 9.073900841908316, 3.3962264150943513, 3.5217794253938908, 3.65630712979889, 5.341506129597192, 3.8903625110521616, 4.680468046804677, 2.3657870791628897, 10.117878192534375, 2.6000000000000156, 3.7438423645320094, 5.616850551654969, 4.461687681862277, 1.8322082931533221, 4.0877367896311085, 3.451676528599602, 3.2868525896414353, 3.35636722606122, 3.629417382999052, 4.330708661417336, 2.281746031746036, 4.742268041237122, 2.4242424242424265, 14.79859894921192, 6.060606060606062, 15.784982935153579, 4.5681063122923655, 2.647309991460279, 4.374453193350831, 6.399317406143344, 3.6713286713286704, 6.737588652482268, 2.8119507908611623, 3.3447684391080514, 3.373702422145318, 1.8932874354561158, 3.2121724429416654, 5.5360281195079155, 3.6283185840707977, 4.454148471615719, 3.880070546737209, 1.4821272885789007, 1.9332161687170373, 1.8181818181818254, 3.5223367697594514, 1.9947961838681583, 2.227934875749784, 4.010025062656645, 2.451838879159364, 0.8810572687224639, 1.675485008818338, 5.234159779614327, 2.5939177101967723, 1.4532243415077215, 1.3748854262144692, 2.511210762331833, 3.2513181019332094, 2.094240837696337, 1.5570934256055338, 3.247863247863255, 3.5405872193436974, 2.956081081081093, 7.459016393442624, 6.031746031746031, 5.654531371030212], "period_amp_20": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 27.413533147530494, 28.51342622497001, 29.015350056158752, 25.525454286663198, 22.675954840259436, 20.701720283798238, 21.10740231690556, 20.790020790020787, 20.697930206979304, 20.859575754522094, 20.496768982229398, 18.54385164918681, 17.077509529860222, 17.077509529860222, 17.085324926268683, 17.081850533807827, 17.067967083206337, 17.075773745997864, 17.0247263883259, 16.94402420574886, 16.81765854146854, 17.566494640730447, 22.08697359379601, 21.880774093163474, 21.686746987951807, 21.500238891543237, 20.446008273501025, 20.409131899947795, 16.54298813631422, 13.687638646339732, 13.72261392135522, 13.730410491927458, 13.753201176135818, 13.78326996197718, 13.804265041888797, 13.82993943440316, 13.829279923700518, 13.822688274547183, 13.86299536306706, 16.515435210523794, 16.586306653809068, 16.548008466422942, 24.057123688120015, 24.00994834513107, 23.903623636969687, 23.821952261187317, 23.68147938484764, 23.49087505849323, 23.349923252244302, 23.208506703652347, 23.094263237797318, 22.958017012713817, 22.798492211272098, 22.646275995849702, 22.464870670366075, 22.339904766143043, 22.257692648754116, 22.131111405016988, 22.008856153272845, 20.09919081179849, 8.04011411774878, 8.03559856568887, 6.582936336076221, 6.588357678470805, 4.775549188156644, 5.98438855160452, 5.984648076672893, 5.994266353922346, 5.996871197636027, 9.402341879597788, 9.41053457064436, 9.437259699405802, 9.464137054725496, 9.483667017913595, 9.50244159957767, 9.499098465191963, 9.488249505820338, 9.477841158402809, 9.467870605768388, 9.452540370224499, 11.42458465966074, 14.845038631825672, 17.440103604575867], "period_amp_60": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 29.99712487620996, 29.993292234963437, 29.99568752096345, 29.160205272497652, 29.153214205798676, 29.146226490468365, 29.13691474577084, 29.1183090946824, 29.11040888633535, 29.1076216009192, 29.10112001021093, 29.079778075377856, 29.053838802166304, 29.00671098247512, 28.94319263725802, 28.90191728727619, 28.8561936402468, 28.796968740132623, 28.740703390898787, 28.65896771152488, 28.56561163923387, 28.46131040616663, 28.353359966423657, 28.259353939112252, 28.154665431812937, 28.034366690745905, 27.01874770248745, 26.947342692595598, 23.20765060607907, 22.891016871865038, 22.87954058611733, 22.861480075901344, 22.843101565344025, 22.824060742918643, 22.78883256412198, 22.756463530727284, 22.71870144367845, 22.662633741140368, 22.632322442968363, 22.59022590225904, 22.542547936593483, 25.98061905544025, 28.694019844462325]}, "statistics": {"current_volatility": 0.1615, "average_volatility": 0.2276, "volatility_percentile": 26.47, "current_amplitude": 5.65, "average_amplitude": 4.17, "amplitude_percentile": 84.31, "max_volatility": 0.3353, "min_volatility": 0.1134, "max_amplitude": 15.78, "min_amplitude": 0.88}, "risk_level": "中高风险"}, "000002.SZ": {"data": {"dates": ["2023-07-23 00:00:00", "2023-07-30 00:00:00", "2023-08-06 00:00:00", "2023-08-13 00:00:00", "2023-08-20 00:00:00", "2023-08-27 00:00:00", "2023-09-03 00:00:00", "2023-09-10 00:00:00", "2023-09-17 00:00:00", "2023-09-24 00:00:00", "2023-10-01 00:00:00", "2023-10-15 00:00:00", "2023-10-22 00:00:00", "2023-10-29 00:00:00", "2023-11-05 00:00:00", "2023-11-12 00:00:00", "2023-11-19 00:00:00", "2023-11-26 00:00:00", "2023-12-03 00:00:00", "2023-12-10 00:00:00", "2023-12-17 00:00:00", "2023-12-24 00:00:00", "2023-12-31 00:00:00", "2024-01-07 00:00:00", "2024-01-14 00:00:00", "2024-01-21 00:00:00", "2024-01-28 00:00:00", "2024-02-04 00:00:00", "2024-02-11 00:00:00", "2024-02-25 00:00:00", "2024-03-03 00:00:00", "2024-03-10 00:00:00", "2024-03-17 00:00:00", "2024-03-24 00:00:00", "2024-03-31 00:00:00", "2024-04-07 00:00:00", "2024-04-14 00:00:00", "2024-04-21 00:00:00", "2024-04-28 00:00:00", "2024-05-05 00:00:00", "2024-05-12 00:00:00", "2024-05-19 00:00:00", "2024-05-26 00:00:00", "2024-06-02 00:00:00", "2024-06-09 00:00:00", "2024-06-16 00:00:00", "2024-06-23 00:00:00", "2024-06-30 00:00:00", "2024-07-07 00:00:00", "2024-07-14 00:00:00", "2024-07-21 00:00:00", "2024-07-28 00:00:00", "2024-08-04 00:00:00", "2024-08-11 00:00:00", "2024-08-18 00:00:00", "2024-08-25 00:00:00", "2024-09-01 00:00:00", "2024-09-08 00:00:00", "2024-09-15 00:00:00", "2024-09-22 00:00:00", "2024-09-29 00:00:00", "2024-10-06 00:00:00", "2024-10-13 00:00:00", "2024-10-20 00:00:00", "2024-10-27 00:00:00", "2024-11-03 00:00:00", "2024-11-10 00:00:00", "2024-11-17 00:00:00", "2024-11-24 00:00:00", "2024-12-01 00:00:00", "2024-12-08 00:00:00", "2024-12-15 00:00:00", "2024-12-22 00:00:00", "2024-12-29 00:00:00", "2025-01-05 00:00:00", "2025-01-12 00:00:00", "2025-01-19 00:00:00", "2025-01-26 00:00:00", "2025-02-02 00:00:00", "2025-02-09 00:00:00", "2025-02-16 00:00:00", "2025-02-23 00:00:00", "2025-03-02 00:00:00", "2025-03-09 00:00:00", "2025-03-16 00:00:00", "2025-03-23 00:00:00", "2025-03-30 00:00:00", "2025-04-06 00:00:00", "2025-04-13 00:00:00", "2025-04-20 00:00:00", "2025-04-27 00:00:00", "2025-05-04 00:00:00", "2025-05-11 00:00:00", "2025-05-18 00:00:00", "2025-05-25 00:00:00", "2025-06-01 00:00:00", "2025-06-08 00:00:00", "2025-06-15 00:00:00", "2025-06-22 00:00:00", "2025-06-29 00:00:00", "2025-07-06 00:00:00", "2025-07-13 00:00:00"], "close_prices": [13.98, 15.23, 15.24, 14.6, 14.31, 13.44, 14.05, 13.91, 13.42, 13.39, 13.08, 12.59, 11.66, 11.63, 11.27, 11.89, 11.62, 12.12, 11.4, 10.78, 10.64, 10.38, 10.46, 9.99, 9.7, 9.41, 10.2, 9.49, 10.06, 10.2, 9.89, 9.18, 9.47, 9.26, 9.0, 8.19, 7.1, 6.7, 6.87, 7.41, 7.56, 9.0, 8.99, 8.25, 8.17, 7.94, 7.19, 6.93, 6.88, 6.95, 7.06, 6.84, 6.81, 7.18, 6.8, 6.41, 6.76, 6.47, 6.32, 6.89, 8.84, 9.72, 9.1, 9.37, 9.14, 9.11, 9.51, 8.71, 8.42, 8.6, 8.68, 8.41, 7.82, 7.55, 7.0, 6.69, 6.63, 7.39, 7.27, 7.42, 7.81, 7.62, 7.75, 7.53, 7.54, 7.36, 7.12, 7.14, 7.08, 7.31, 7.05, 6.81, 6.78, 6.77, 6.63, 6.64, 6.6, 6.44, 6.29, 6.39, 6.44, 6.76], "hist_vol_20": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.30619469336181077, 0.25581920713161554, 0.2575530568824352, 0.25838549328279303, 0.2589376500953251, 0.2492072100185487, 0.27902116895899204, 0.293003346981555, 0.3166786407351133, 0.31941455869034746, 0.3202645459426579, 0.33288052005327334, 0.32414728161276146, 0.3244157368002561, 0.3239492462233044, 0.33067030336442915, 0.38669087974600475, 0.37283385202899233, 0.37873348242398497, 0.4079455224447378, 0.41267204056324863, 0.5147989648088139, 0.5143017621241113, 0.5263489385985274, 0.5252688473931872, 0.5250729378918509, 0.5216070860672022, 0.5145380884915859, 0.49935120036735314, 0.49872132311710393, 0.5013816305632265, 0.49258340371826786, 0.4868397238351726, 0.49931875873642895, 0.5032860960728486, 0.4909535801977105, 0.44814578861952103, 0.44391011759303994, 0.44278429714640105, 0.4483575648150103, 0.6060387460723359, 0.5579159735403917, 0.5691632059078084, 0.5512664396200055, 0.5530103000971685, 0.5502318270861747, 0.5222530420040915, 0.5419576555469204, 0.5461514158343529, 0.5464421897226603, 0.546377912543416, 0.546365876698491, 0.5622883867422169, 0.5604978284190946, 0.5674094453548983, 0.5638140039784734, 0.5572894904945267, 0.5789430498078691, 0.5780467331946648, 0.5628533198188143, 0.39071198968431115, 0.3516546800198284, 0.34224777493660213, 0.3377158133809179, 0.3374003144149897, 0.3380061561496295, 0.32705569310521543, 0.3031702004026208, 0.30043871370136394, 0.30386377998578024, 0.30558544180156505, 0.30620036486821256, 0.2874708811997307, 0.28359510083783507, 0.25920525203138123, 0.24894600324149702, 0.24871025102490601, 0.1693652735192588, 0.17085985201940543, 0.16895347999963983, 0.13962558580628218, 0.16552863549945412], "hist_vol_60": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.4579686620328675, 0.45970865006739214, 0.46283602351758835, 0.4629955298827854, 0.4631325144889802, 0.4601789993617378, 0.4600429235435891, 0.46623465093126276, 0.4661322757103994, 0.46688489288330737, 0.4668864041933089, 0.46653701955957644, 0.46602231259706356, 0.4667562154394943, 0.47057687056865505, 0.4681844438657876, 0.4680130286159265, 0.4784156931094345, 0.47585148996477694, 0.4743094759833459, 0.47725932655731357, 0.47725532247626545, 0.47755162132487333, 0.47651927712698494, 0.47597171563905727, 0.47570671658113506, 0.4696024671613689, 0.4654616884900781, 0.46162234921882045, 0.4626122511455938, 0.4628970841026371, 0.4591434629868024, 0.45787248836521754, 0.4576080534074276, 0.45732270864871727, 0.4494800224370778, 0.4297155221636279, 0.4269402584681244, 0.4267585966598349, 0.42081845608101576, 0.4203953494696455, 0.388827654912405], "realized_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.31425581227387217, 0.2850953340105193, 0.28536202785041004, 0.28660307130156837, 0.2887058798091775, 0.27480452629816804, 0.29545169529221726, 0.31712022823821373, 0.32567962574607945, 0.32642122579451527, 0.32802578885242956, 0.3438604854784676, 0.32472159603706635, 0.3267022071745294, 0.32599465436761793, 0.3492012561483197, 0.41665655632163573, 0.4215810434231225, 0.4118384484613827, 0.4199599761782342, 0.42067367136325745, 0.504393380275324, 0.5042446210583484, 0.5176408370473741, 0.5156962179727114, 0.5154292492120842, 0.5238011574187428, 0.5141598935364049, 0.5056193762553858, 0.5053916987963117, 0.5035725007720502, 0.4916924668010017, 0.4891796154818672, 0.4952444720427728, 0.5008453301092494, 0.4866111148926105, 0.43715667908193057, 0.4328533347342892, 0.4326201957160445, 0.4377916064786206, 0.593379622467779, 0.5444967512261256, 0.5547690011956672, 0.5392649046001184, 0.5405235175064366, 0.5385848799521071, 0.5189196088792802, 0.5346273862314045, 0.5372814505981424, 0.5381154347697789, 0.5377266791493389, 0.5377179215086568, 0.5503144937536641, 0.5466060365831579, 0.5531410677144418, 0.5497540848602516, 0.5432237250640407, 0.5663163424461126, 0.5656681664043154, 0.5492518780571287, 0.3834294467308451, 0.35380815619679584, 0.3385691949428602, 0.3384709338504584, 0.33609707472379896, 0.33830616002121466, 0.33542164837512545, 0.3040595843779241, 0.2994263582783249, 0.3019108299908229, 0.3071438260596613, 0.3079936212584976, 0.2848772303548144, 0.27919656082847905, 0.253399632416923, 0.2426576253276726, 0.2424182817133161, 0.17237089683400253, 0.17452498347623857, 0.1732668500329089, 0.15282902188210543, 0.1670151465498729], "parkinson_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.2646137928431416, 0.268649081212962, 0.25236663685451277, 0.24969032658629614, 0.25319754630128577, 0.25314952845296457, 0.2465632981245298, 0.27931030782351046, 0.30382423125876457, 0.3196788807352512, 0.3288272665170061, 0.329882816269267, 0.3338619331536701, 0.33231838355020793, 0.3319223742922632, 0.3342088644816926, 0.3430897880869109, 0.36404338994089147, 0.36939766464677076, 0.3690097756936415, 0.38833564218890926, 0.39419508310851914, 0.43819561039513943, 0.4508666323962591, 0.4572142580424311, 0.45912964703421094, 0.4599355744814584, 0.4471670311422014, 0.4321744444533622, 0.4248253879854079, 0.43421433537208637, 0.43778934673574454, 0.4396756870752673, 0.43460212964374967, 0.44248604474456327, 0.44276741368502365, 0.4362498243805297, 0.4288358443683542, 0.4248637303433949, 0.42198182300914266, 0.4099267229325527, 0.4760971426664079, 0.43505259014895936, 0.4633773849478627, 0.47097168425178837, 0.4699024871364836, 0.46923608807234257, 0.4750886245344921, 0.4793699825711943, 0.47905259816520723, 0.46755877662556405, 0.4643137833934524, 0.46325575651482503, 0.46441949862962795, 0.45739179085228193, 0.4582429222359859, 0.45545984749709867, 0.45290636469608603, 0.47830981410798645, 0.47885336942590423, 0.48064830383201534, 0.4280846769012406, 0.4286035429794816, 0.3838537887929496, 0.36858138556828424, 0.3659615300497091, 0.36456467106144214, 0.3457965080959763, 0.33737698125926713, 0.35039930265638697, 0.3506354618753469, 0.35044640887387585, 0.34756965172844856, 0.34107529327262476, 0.33980187255982763, 0.3329702135035247, 0.3298954582267323, 0.318185095035219, 0.2746328377074249, 0.2760359213500167, 0.259500516412468, 0.22286632338000026, 0.22591035370628174], "gk_vol": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.25979329622076996, 0.2661644932733835, 0.25404302904156567, 0.2503017863080027, 0.253204999372318, 0.2509121780379326, 0.24801536167164565, 0.2771510417419416, 0.2973247406953722, 0.31389562794030773, 0.3265540218533154, 0.32742586992335543, 0.33040752115519895, 0.33604501114078167, 0.33484569018858923, 0.33754806060240605, 0.34012255575979533, 0.34743022352252717, 0.35377256016090664, 0.3564584811451926, 0.3765957648073052, 0.3848501275701938, 0.40282946173148276, 0.42192548367672783, 0.42834426265597497, 0.43247493550110183, 0.43387075523814467, 0.41747053824276537, 0.4047111721465127, 0.3999640142871435, 0.413539336630029, 0.4185731319289778, 0.4233827010408992, 0.41646026947778403, 0.42448043357763804, 0.4230149585170345, 0.41917989840355796, 0.42405219494957397, 0.42103141691302964, 0.41780380458288846, 0.40236931899706585, 0.41541099445600266, 0.3970275126306835, 0.40849117376403515, 0.4256365370225938, 0.42382736824217476, 0.4231595951153099, 0.4385381003178059, 0.4396335300365872, 0.4370433794779331, 0.419260134842795, 0.4149670024988317, 0.41392774962691353, 0.4091190982830548, 0.40089195388061205, 0.39942952386982533, 0.396339258874655, 0.39583753342302774, 0.4203354597696564, 0.42116203139076863, 0.4290550944750616, 0.4306945075087256, 0.4310760481577333, 0.4016626696436963, 0.3802467615887254, 0.37691320226532105, 0.3736570678452323, 0.34873742831229365, 0.3451695121727104, 0.36388866629788086, 0.363082121262489, 0.3626360587404686, 0.3591305171310221, 0.358136028539804, 0.3577822347318202, 0.35509736838369405, 0.35383480620179747, 0.3386584269864687, 0.30187818934808536, 0.3028427727262275, 0.2857293354931529, 0.24530348690852338, 0.2449347905912704], "intraday_amp": [3.791130185979967, 10.505581089954036, 6.167979002624668, 4.041095890410959, 5.031446540880495, 9.226190476190464, 5.836298932384331, 4.313443565780012, 4.023845007451558, 1.7176997759522064, 2.5229357798165144, 3.8125496425734746, 10.806174957118351, 4.127257093723117, 5.590062111801234, 7.148864592094194, 4.4750430292598935, 6.188118811881189, 6.8421052631579045, 6.864564007421152, 6.203007518796993, 5.5876685934489405, 4.780114722753346, 6.006006006006002, 5.05154639175258, 6.907545164718369, 13.92156862745098, 13.48788198103266, 10.437375745526847, 8.039215686274513, 3.7411526794742085, 6.644880174291933, 10.242872228088688, 3.7796976241900615, 6.999999999999989, 11.355311355311352, 14.225352112676054, 9.402985074626864, 6.259097525473067, 13.900134952766535, 9.259259259259261, 18.555555555555557, 12.45828698553948, 10.18181818181818, 6.609547123623022, 7.430730478589418, 10.152990264255903, 5.627705627705623, 7.558139534883715, 11.942446043165468, 6.798866855524086, 7.74853801169591, 7.342143906020558, 9.192200557103067, 7.20588235294118, 7.644305772230893, 10.059171597633146, 6.800618238021632, 3.9556962025316453, 9.288824383164002, 23.416289592760183, 4.62962962962964, 21.64835164835164, 13.127001067235867, 5.798687089715529, 7.135016465422616, 12.302839116719243, 8.955223880597027, 7.363420427553436, 5.930232558139532, 3.801843317972351, 7.253269916765747, 8.312020460358049, 4.370860927152319, 7.857142857142854, 5.381165919282503, 9.351432880844648, 16.50879566982408, 4.676753782668499, 10.377358490566044, 13.956466069142135, 5.249343832021002, 5.290322580645164, 7.171314741035857, 3.4482758620689626, 6.250000000000011, 3.3707865168539226, 3.5014005602240896, 11.72316384180791, 6.019151846785231, 3.6879432624113444, 5.286343612334806, 4.129793510324474, 3.1019202363367797, 3.016591251885372, 2.40963855421687, 1.81818181818182, 4.813664596273299, 5.564387917329088, 4.225352112676064, 3.7267080745341645, 6.360946745562127], "period_amp_20": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 34.359231154423945, 35.89963710149451, 38.66040887757537, 34.219915666558535, 35.698053960252864, 36.643922163255006, 39.761772141051466, 39.20885248758386, 35.62544420753376, 35.8946608946609, 33.58191883607082, 29.529204197232794, 27.739774496390996, 28.029364095719316, 28.349645629429627, 30.418250950570336, 39.01906274821287, 50.98517164330693, 49.08616187989557, 43.643365245761345, 42.91938997821351, 41.6574340793264, 41.978340962375796, 39.39888557437946, 39.78855226510544, 40.13761467889907, 40.47880645347828, 41.195856873822976, 41.82600382409177, 42.63613107564867, 39.64456596035545, 35.04111321948135, 35.567539804827945, 33.44219464402351, 30.459541782545358, 30.909823948394035, 35.22850924918389, 35.31015678254941, 35.36560387792722, 36.73245614035088, 36.86382393397524, 36.54213253340605, 46.13297150610584, 46.09856958850248, 45.75119424073201, 45.45454545454547, 45.10181070504743, 44.41831602325429, 43.90779363336993, 43.475481107346084, 43.021637352903966, 42.585170340681366, 42.17054263565892, 41.90804881055097, 41.81270368320729, 41.76134618927716, 41.689657286493784, 41.72291078659959, 41.48871262965223, 37.488626023657886, 37.368484701898666, 37.60267721326438, 35.50077041602464, 35.798632691112495, 36.212749905695965, 36.58071891273974, 36.991843812215016, 27.132794156013578, 27.01812191103789, 27.258825875939095, 27.494635193133043, 24.13722964268764, 16.313660977448766, 16.292716603382804, 16.380925938779754, 16.423103688239387, 16.42882004872955, 16.850020888455646, 19.205158757972935, 21.45528971698778, 21.612398691881126, 20.96345753463996, 21.093693563533915], "period_amp_60": [NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 90.92608008698458, 91.72708108386034, 92.6015641220846, 86.88048686649644, 84.61144743112304, 82.61194827401947, 83.25405230752662, 82.41788073477512, 77.82954234036723, 78.21517470268277, 75.45204256269069, 70.56043214044563, 65.78698627547354, 66.26804280763224, 66.78693432618122, 67.33876429497474, 68.02322172051836, 68.69324911172522, 60.732859106940055, 53.76300879977497, 52.42930539261298, 50.53402502288679, 50.81937028171608, 47.893350888742575, 48.13696704023819, 48.35292651518298, 48.55968794977158, 48.873680011756534, 49.115996455546636, 49.42675159235668, 45.758475571980945, 43.845509059255924, 44.0699935191186, 44.32758957867062, 44.56873197588045, 44.800702756121666, 44.95372410753637, 45.00330906684316, 45.0291365000883, 45.484683728948426, 45.587453482190334, 45.700834961804944, 45.92929833958222]}, "statistics": {"current_volatility": 0.1655, "average_volatility": 0.4068, "volatility_percentile": 0.98, "current_amplitude": 6.36, "average_amplitude": 7.43, "amplitude_percentile": 48.04, "max_volatility": 0.606, "min_volatility": 0.1396, "max_amplitude": 23.42, "min_amplitude": 1.72}, "risk_level": "中等风险"}};
        
        function refreshAnalysis() {
            // 获取选中的股票和时间范围
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            // 构建URL参数
            const params = new URLSearchParams({
                stocks: selectedStocks.join(','),
                start_date: startDate,
                end_date: endDate
            });
            
            // 重新加载页面
            window.location.href = window.location.pathname + '?' + params.toString();
        }
        
        function updateDisplay() {
            // 过滤选中的股票数据
            const filteredData = {};
            selectedStocks.forEach(stock => {
                if (allStockData[stock]) {
                    filteredData[stock] = allStockData[stock];
                }
            });
            
            // 更新统计摘要
            updateSummaryStats(filteredData);
            
            // 更新图表显示
            updateChartsGrid(filteredData);
            
            // 更新信息面板
            updateInfoPanel(filteredData);
        }
        
        function updateSummaryStats(data) {
            const summaryContainer = document.querySelector('.summary-stats');
            if (Object.keys(data).length === 0) {
                summaryContainer.innerHTML = '<div class="stat-card"><h3>无数据</h3><div class="stat-value">0</div></div>';
                return;
            }
            
            // 计算汇总统计
            const volatilities = Object.values(data).map(result => result.statistics.current_volatility);
            const amplitudes = Object.values(data).map(result => result.statistics.current_amplitude);
            const riskLevels = Object.values(data).map(result => result.risk_level);
            
            const avgVol = volatilities.reduce((a, b) => a + b, 0) / volatilities.length;
            const avgAmp = amplitudes.reduce((a, b) => a + b, 0) / amplitudes.length;
            const highRiskCount = riskLevels.filter(level => level === '高风险').length;
            const lowRiskCount = riskLevels.filter(level => level === '低风险').length;
            
            summaryContainer.innerHTML = `
                <div class="stat-card">
                    <h3>平均波动率</h3>
                    <div class="stat-value">${avgVol.toFixed(4)}</div>
                </div>
                <div class="stat-card">
                    <h3>平均波幅</h3>
                    <div class="stat-value">${avgAmp.toFixed(2)}%</div>
                </div>
                <div class="stat-card">
                    <h3>高风险股票</h3>
                    <div class="stat-value">${highRiskCount}</div>
                </div>
                <div class="stat-card">
                    <h3>低风险股票</h3>
                    <div class="stat-value">${lowRiskCount}</div>
                </div>
            `;
        }
        
        function updateChartsGrid(data) {
            const chartsContainer = document.querySelector('.charts-grid');
            if (Object.keys(data).length === 0) {
                chartsContainer.innerHTML = '<div class="chart-container"><div class="chart-title">无数据</div></div>';
                return;
            }
            
            let chartsHtml = '';
            Object.entries(data).forEach(([code, result]) => {
                const stats = result.statistics;
                const riskLevel = result.risk_level;
                
                const riskClass = {
                    '低风险': 'risk-low',
                    '中等风险': 'risk-medium',
                    '中高风险': 'risk-high',
                    '高风险': 'risk-high'
                }[riskLevel] || 'risk-medium';
                
                chartsHtml += `
                    <div class="chart-container">
                        <div class="chart-title">
                            ${code}
                            <span class="risk-indicator ${riskClass}">${riskLevel}</span>
                        </div>
                        <div class="chart-content">
                            <img src="images/volatility_${code}.png" alt="${code} 波动率分析" style="width: 100%; height: auto;">
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            波动率: ${stats.current_volatility.toFixed(4)} | 波幅: ${stats.current_amplitude.toFixed(2)}%
                        </div>
                    </div>
                `;
            });
            
            chartsContainer.innerHTML = chartsHtml;
        }
        
        function updateInfoPanel(data) {
            const infoContainer = document.querySelector('.info');
            const stockCount = Object.keys(data).length;
            infoContainer.innerHTML = `
                <p><strong>生成时间:</strong> 2025-07-19 18:00:17</p>
                <p><strong>分析范围:</strong> 2023-07-20 至 2025-07-19</p>
                <p><strong>分析股票:</strong> ${stockCount} 只</p>
            `;
        }
        
                    function exportData() {
                // 导出分析数据（简化版本）
                const data = {
                    generation_time: '2025-07-19 18:00:17',
                    total_stocks: 2
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'volatility_analysis_summary.json';
                a.click();
                URL.revokeObjectURL(url);
            }
        
        // 自定义下拉多选相关函数
        function toggleSelect() {
            const selectItems = document.getElementById('stockOptions');
            const selectSelected = document.querySelector('.select-selected');
            selectItems.classList.toggle('show');
            selectSelected.classList.toggle('select-arrow-active');
        }
        
        function selectStock(stockCode) {
            const item = document.querySelector(`[data-value="${stockCode}"]`);
            if (selectedStocks.includes(stockCode)) {
                // 取消选择
                selectedStocks = selectedStocks.filter(s => s !== stockCode);
                item.classList.remove('selected');
            } else {
                // 选择
                selectedStocks.push(stockCode);
                item.classList.add('selected');
            }
            updateSelectedDisplay();
            updateDisplay(); // 更新数据显示
        }
        
        function updateSelectedDisplay() {
            const selectedItemsContainer = document.getElementById('selectedItems');
            const selectedCount = document.getElementById('selectedCount');
            
            // 更新选中数量
            selectedCount.textContent = selectedStocks.length;
            
            // 更新选中项目显示
            selectedItemsContainer.innerHTML = '';
            selectedStocks.forEach(stock => {
                const item = document.createElement('div');
                item.className = 'selected-item';
                item.innerHTML = `${stock} <span class="remove" onclick="removeStock('${stock}')">&times;</span>`;
                selectedItemsContainer.appendChild(item);
            });
            
            // 更新下拉框显示文本
            const selectSelected = document.querySelector('.select-selected');
            if (selectedStocks.length === 0) {
                selectSelected.textContent = '点击选择股票';
            } else if (selectedStocks.length <= 3) {
                selectSelected.textContent = selectedStocks.join(', ');
            } else {
                selectSelected.textContent = `已选择 ${selectedStocks.length} 只股票`;
            }
        }
        
        function removeStock(stockCode) {
            selectedStocks = selectedStocks.filter(s => s !== stockCode);
            const item = document.querySelector(`[data-value="${stockCode}"]`);
            item.classList.remove('selected');
            updateSelectedDisplay();
            updateDisplay(); // 更新数据显示
        }
        
        // 股票选择相关函数
        function selectAll() {
            const stockItems = document.querySelectorAll('.select-item');
            selectedStocks = [];
            stockItems.forEach((item, index) => {
                const stockCode = item.getAttribute('data-value');
                selectedStocks.push(stockCode);
                item.classList.add('selected');
            });
            updateSelectedDisplay();
            updateDisplay(); // 更新数据显示
        }
        
        function clearSelection() {
            const stockItems = document.querySelectorAll('.select-item');
            selectedStocks = [];
            stockItems.forEach(item => {
                item.classList.remove('selected');
            });
            updateSelectedDisplay();
            updateDisplay(); // 更新数据显示
        }
        
        function selectTop10() {
            const stockItems = document.querySelectorAll('.select-item');
            selectedStocks = [];
            stockItems.forEach((item, index) => {
                const stockCode = item.getAttribute('data-value');
                if (index < 10) {
                    selectedStocks.push(stockCode);
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
            updateSelectedDisplay();
            updateDisplay(); // 更新数据显示
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 从URL参数中恢复选择状态
            const urlParams = new URLSearchParams(window.location.search);
            const stocks = urlParams.get('stocks');
            const startDate = urlParams.get('start_date');
            const endDate = urlParams.get('end_date');
            
            // 初始化默认选择前10只股票
            const stockItems = document.querySelectorAll('.select-item');
            stockItems.forEach((item, index) => {
                const stockCode = item.getAttribute('data-value');
                if (index < 10) {
                    selectedStocks.push(stockCode);
                    item.classList.add('selected');
                }
                
                // 添加点击事件
                item.addEventListener('click', function() {
                    selectStock(stockCode);
                });
            });
            
            // 如果有URL参数，覆盖默认选择
            if (stocks) {
                const stockArray = stocks.split(',');
                selectedStocks = stockArray;
                stockItems.forEach(item => {
                    const stockCode = item.getAttribute('data-value');
                    if (stockArray.includes(stockCode)) {
                        item.classList.add('selected');
                    } else {
                        item.classList.remove('selected');
                    }
                });
            }
            
            if (startDate) {
                document.getElementById('startDate').value = startDate;
            }
            
            if (endDate) {
                document.getElementById('endDate').value = endDate;
            }
            
            // 更新显示
            updateSelectedDisplay();
            updateDisplay(); // 初始化数据显示
            
            // 点击外部关闭下拉框
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-select')) {
                    const selectItems = document.getElementById('stockOptions');
                    const selectSelected = document.querySelector('.select-selected');
                    selectItems.classList.remove('show');
                    selectSelected.classList.remove('select-arrow-active');
                }
            });
        });
    </script>
</body>
</html>
        